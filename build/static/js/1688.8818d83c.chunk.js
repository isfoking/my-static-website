"use strict";(self.webpackChunkgame_phone=self.webpackChunkgame_phone||[]).push([[1688],{11688:function(n,e,r){r.r(e),r.d(e,{default:function(){return N}});var t,i=r(74165),a=r(15861),o=r(29439),s=r(54816),c=r(30168),l=r(83742),d=r(4279).ZP.div(t||(t=(0,c.Z)(["\n  overflow: hidden;\n  height: calc(100vh - var(--nav-bar-height));\n  .content {\n    margin: 10px 0;\n    padding: 20px 12px;\n    background-color: #03060c;\n    box-sizing: border-box;\n    height: calc(100vh - var(--nav-bar-height) - 20px - 187px);\n    overflow: auto;\n    // \u6eda\u52a8\u6761\n    ::-webkit-scrollbar {\n      /*\u6eda\u52a8\u6761\u6574\u4f53\u6837\u5f0f*/\n      height: 0px;\n      width: 0px;\n    }\n\n    .item {\n      margin-top: 24px;\n      font-size: 24px;\n      .time {\n        color: #909ec7;\n        text-align: center;\n      }\n      .message-box {\n        margin-top: 18px;\n        ","\n        .message-wrapper {\n          ","\n          flex-direction: column;\n          .message-img {\n            margin-top: 10px;\n            text-align: left;\n            > img {\n              max-width: 300px;\n            }\n          }\n        }\n        > img {\n          margin-right: 25px;\n          width: 75px;\n          height: 75px;\n          border-radius: 50%;\n        }\n        .message {\n          position: relative;\n          color: #909ec7;\n          word-wrap: break-word;\n          max-width: 498px;\n          background-color: #171d2e;\n          border-radius: 10px;\n          padding: 28px 24px;\n        }\n        .message::before {\n          position: absolute;\n          content: '';\n          display: inline-block;\n          width: 0;\n          height: 0;\n          top: 25px;\n          left: -14px;\n          border-top: 15px solid transparent;\n          border-right: 15px solid #171d2e;\n          border-bottom: 15px solid transparent;\n        }\n      }\n    }\n    .right.item {\n      .message-box {\n        ","\n        flex-direction: row-reverse;\n        .message-wrapper {\n          .message-img {\n            text-align: right;\n          }\n        }\n        > img {\n          margin-left: 25px;\n          margin-right: 0;\n        }\n      }\n      .message {\n        color: #03060c;\n        background-color: #dce0ff;\n      }\n      .message::before {\n        left: auto !important;\n        right: -26px;\n        border-top: 15px solid transparent;\n        border-left: 15px solid #dce0ff;\n        border-bottom: 15px solid transparent;\n      }\n    }\n  }\n  .footer {\n    .footer-wrapper {\n      position: fixed;\n      padding: 12px 32px;\n      box-sizing: border-box;\n      bottom: 0;\n      left: 0;\n      width: 100%;\n      height: 187px;\n      background-color: #0a0e1a;\n      ","\n      > input {\n        flex: 1;\n        padding-left: 20px;\n        color: #fff;\n        height: 100px;\n        border-radius: 50px;\n        background-color: #3c486c;\n      }\n      .circle {\n        margin-left: 22px;\n        ","\n        width: 100px;\n        height: 100px;\n        box-sizing: border-box;\n        border-radius: 50%;\n        background-color: #3c486c;\n        > img {\n          width: 50px;\n          height: 50px;\n        }\n      }\n      .add-img {\n        color: #fff;\n        font-size: 46px;\n      }\n    }\n  }\n  .image-uploader {\n    width: 0;\n    height: 0;\n    opacity: 0;\n  }\n"])),l.fU,l.fU,l.fU,l.fU,l.t$),u=r(10549),p=r(37666),f=r(54363),g=r.n(f),x=r(60742),m=r.n(x),h=r(69896),v=r(22042),b=r(54062),w=r(51334),k=r(96899),j=r(42374),Z=function(){var n=(0,k.lr)(),e=(0,o.Z)(n,1)[0],t=(0,b.xf)(decodeURIComponent(e.get("context")),"34eaf0a8-10d8-4a32-b1d7-8788d076be18"),c=t.token,l=t.headpic_id;c&&(0,w.po)("sess",c),(0,s.useEffect)((function(){return function(){(0,w.ho)("sess")}}),[]);var f=(0,s.useRef)(null),x=(0,s.useState)(""),Z=(0,o.Z)(x,2),N=Z[0],y=Z[1],C=(0,s.useState)(!1),H=(0,o.Z)(C,2),Y=H[0],_=H[1],R=(0,s.useState)([]),U=(0,o.Z)(R,2),z=U[0],E=U[1],L=(0,s.useRef)(null),M=(0,s.useRef)(null),S=(0,u.CG)((function(n){return n.user.userInfo})),T=(0,u.CG)((function(n){return n.service.feedBackList})),$=l||(null===S||void 0===S?void 0:S.headpic_id),D=(0,u.TL)();(0,s.useEffect)((function(){D((0,p.Y$)())}),[]),(0,s.useEffect)((function(){E(T.filter((function(n){return n.image})).map((function(n){return n.image})))}),[T]),(0,s.useEffect)((function(){var n;T.length>0&&(null===(n=M.current)||void 0===n||n.scrollTo({top:M.current.scrollHeight}))}),[T]);var F=function(){var n=(0,a.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(N){n.next=2;break}return n.abrupt("return",h.FN.show("Silahkan isi isi~"));case 2:return n.next=4,D((0,p.HM)({type:4,content:"Lainnya/Saran\nLaporan\n".concat(N)}));case 4:"fulfilled"===n.sent.type.split("/")[1]&&(D((0,p.Y$)()),y(""));case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),I=function(){var n=(0,a.Z)((0,i.Z)().mark((function n(e){var r;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=new FileReader).readAsDataURL(e),r.onload=function(){var n=(0,a.Z)((0,i.Z)().mark((function n(e){var r;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.target.result,n.next=3,D((0,p.HM)({type:4,imgBase64:r}));case 3:D((0,p.Y$)());case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),n.abrupt("return",{url:""});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),A=function(n){var e=null===n||void 0===n?void 0:n.split("\n");return null!==e&&void 0!==e&&e.length?e[e.length-1]:""};return(0,j.jsxs)(d,{children:[(0,j.jsx)("span",{}),(0,j.jsx)("div",{className:"content",ref:M,children:T.map((function(n,e){return(0,j.jsxs)("div",{className:m()("item",{right:!n.is_answer}),children:[(0,j.jsx)("div",{className:"time",children:g().unix(null===n||void 0===n?void 0:n.created_at).format("YYYY-MM-DD HH:mm:ss")}),(0,j.jsxs)("div",{className:"message-box",children:[(0,j.jsx)("img",{src:n.is_answer||!S&&!c?r(63674):r(68581)("./".concat($,".png")),alt:""}),(0,j.jsxs)("div",{className:"message-wrapper",children:[n.content&&(0,j.jsx)("div",{className:"message",children:A(n.content)}),(0,j.jsx)("div",{className:"message-img",onClick:(t=n.image,function(){var n=z.findIndex((function(n){return n===t}));L.current.swipeTo(n),_(!0)}),children:n.image&&(0,j.jsx)("img",{src:n.image,alt:""})})]})]})]},e);var t}))}),(0,j.jsx)(h.OO.Multi,{ref:L,images:z,visible:Y,onClose:function(){_(!1)}}),(0,j.jsx)("div",{className:"footer",children:(0,j.jsxs)("div",{className:"footer-wrapper",children:[(0,j.jsx)("input",{type:"text",value:N,onChange:function(n){return y(n.target.value)},onFocus:function(){setTimeout((function(){var n;null===(n=M.current)||void 0===n||n.scrollTo({top:M.current.scrollHeight+window.innerHeight})}),0)}}),N?(0,j.jsx)("div",{className:"send-message circle",onClick:F,children:(0,j.jsx)("img",{src:r(79888),alt:""})}):(0,j.jsx)("div",{className:"add-img circle",onClick:function(){var n,e=null===(n=f.current)||void 0===n?void 0:n.nativeElement;e&&e.click()},children:(0,j.jsx)(v.Z,{})}),(0,j.jsx)(h.wA,{className:"image-uploader",ref:f,upload:I})]})})]})},N=(0,s.memo)(Z)},79888:function(n,e,r){n.exports=r.p+"static/media/send.b8bac0454200e7fd98d8.png"},63674:function(n,e,r){n.exports=r.p+"static/media/service-head.3e5a678a41b790376b07.png"}}]);